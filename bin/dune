(executable
(public_name photocaml)
(name main)
(libraries dream uuidm str lwt database)
(preprocess (pps lwt_ppx))
(flags (:standard -w -27-33)) ; Disable warnings for unused variables and opens
)

(rule
(targets layout.ml)
(deps layout.eml.html)
(action (run dream_eml %{deps} --workspace %{workspace_root})))

(rule
(targets home.ml)
(deps home.eml.html)
(action (run dream_eml %{deps} --workspace %{workspace_root})))

(rule
(targets album.ml)
(deps album.eml.html)
(action (run dream_eml %{deps} --workspace %{workspace_root})))

(rule
(targets album_detail.ml)
(deps album_detail.eml.html)
(action (run dream_eml %{deps} --workspace %{workspace_root})))

(rule
(targets template.ml)
(deps template.eml.html)
(action (run dream_eml %{deps} --workspace %{workspace_root})))

(rule
(targets new_album.ml)
(deps new_album.eml.html)
(action (run dream_eml %{deps} --workspace %{workspace_root})))

(rule
(targets upload.ml)
(deps upload.eml.html)
(action (run dream_eml %{deps} --workspace %{workspace_root})))
